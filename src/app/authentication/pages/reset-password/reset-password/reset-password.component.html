<div class="flex min-h-screen items-center justify-center">
    @if (resetPasswordSuccessful) {
    <div class="flex justify-center items-center flex-col">
        <h1>Reset password succeded.</h1>
        <button mat-raised-button [routerLink]="['/login']">Login</button>
    </div>
    } @else {
    <mat-card class="p-1 md:p-4">
        <mat-card-header>
            <div class="pb-2">
                <mat-card-title class="dark:!text-white">Reset Password</mat-card-title>
            </div>
        </mat-card-header>
        <mat-card-content>
            <form [formGroup]="form" (ngSubmit)="onSubmit()" class="flex flex-col gap-1 pb-4">
                <mat-form-field appearance="outline" [hideRequiredMarker]="true">
                    <mat-label>Password</mat-label>
                    <input matInput [type]="hide() ? 'password' : 'text'" [formControl]="password"
                        placeholder="Password" autocomplete="current-password" />
                    <button type="button" mat-icon-button matSuffix (click)="togglePassword($event)"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide()">
                        <mat-icon>{{hide() ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    @if (password.hasError('required')) {
                    <mat-error>Password is required</mat-error>
                    }
                    @else if (password.hasError('minlength')) {
                    <mat-error>Must be at least 10 characters</mat-error>
                    }
                    @else if (password.hasError("hasSpace")) {
                    <mat-error>Must not contain spaces</mat-error>
                    }
                    @else if (password.hasError("hasLower")) {
                    <mat-error>Must contain a lowercase letter</mat-error>
                    }
                    @else if (password.hasError("hasUpper")) {
                    <mat-error>Must contain an uppercase letter</mat-error>
                    }
                    @else if (password.hasError("hasNumber")) {
                    <mat-error>Must contain a number</mat-error>
                    }
                    @else if (password.hasError("notOnlyLettersOrNumbers")) {
                    <mat-error>Must contain a special character</mat-error>
                    }
                    @else if (password.hasError("maxlength")) {
                    <mat-error>Must be max 100 characters</mat-error>
                    }
                </mat-form-field>
                <mat-form-field appearance="outline" [hideRequiredMarker]="true">
                    <mat-label>Confirm Password</mat-label>
                    <input matInput [type]="hide() ? 'password' : 'text'" [formControl]="confirmPassword"
                        placeholder="Confirm Password" autocomplete="current-password" />
                    <button type="button" mat-icon-button matSuffix (click)="togglePassword($event)"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide()">
                        <mat-icon>{{hide() ? 'visibility_off' : 'visibility'}}</mat-icon>
                    </button>
                    @if (confirmPassword.hasError('required')) {
                    <mat-error>Password is required</mat-error>
                    }
                    @else if (confirmPassword.hasError('minlength')) {
                    <mat-error>Must be at least 10 characters</mat-error>
                    }
                    @else if (confirmPassword.hasError("hasSpace")) {
                    <mat-error>Must not contain spaces</mat-error>
                    }
                    @else if (confirmPassword.hasError('hasLower')) {
                    <mat-error>Must contain a lowercase letter</mat-error>
                    }
                    @else if (confirmPassword.hasError('hasUpper')) {
                    <mat-error>Must contain an uppercase letter</mat-error>
                    }
                    @else if (confirmPassword.hasError("hasNumber")) {
                    <mat-error>Must contain a number</mat-error>
                    }
                    @else if (confirmPassword.hasError("notOnlyLettersOrNumbers")) {
                    <mat-error>Must contain a special character</mat-error>
                    }
                    @else if (confirmPassword.hasError('maxlength')) {
                    <mat-error>Must be max 100 characters</mat-error>
                    }
                    @else if (form.hasError("passwordsMatch")) {
                    <div class="absolute custom-error">
                        <mat-error class="text-xs">Passwords do not match</mat-error>
                    </div>
                    }
                </mat-form-field>

                <button type="submit" [disabled]="!form.valid || isLoading" mat-raised-button>
                    @if (isLoading) {
                    <mat-spinner diameter="20"></mat-spinner>
                    } @else {
                    Submit
                    }
                </button>
            </form>
        </mat-card-content>
    </mat-card>
    }
</div>